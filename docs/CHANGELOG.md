# 天玑 GPU 调速器更新日志 📝

## v2.2 → v2.3 (2023-05-08) 🚀

### 新增功能 ✨

- 🔄 **多级负载阈值系统**：新增支持极低、低、中、高、极高五个负载区域的智能调频
  - 极低负载：默认10%以下，降低频率以节省电量
  - 低负载：默认10-30%，适当降低频率
  - 中等负载：默认30-70%，保持平衡的频率
  - 高负载：默认70-90%，提高频率以提供更好性能
  - 极高负载：默认90%以上，使用最高频率

- 📊 **游戏模式优化**：游戏模式下使用更积极的升频策略，提供更好的游戏体验
  - 游戏模式：更低的高负载阈值(5/20/60/85)，更快进入高负载区域
  - 普通模式：默认负载阈值(10/30/70/90)，平衡性能与功耗

- 📝 **实时日志等级调整**：支持在不重启模块的情况下动态调整日志等级
  - 新增日志等级监控线程，实时监控日志等级变化
  - 通过WebUI或命令行修改日志等级后立即生效，无需重启模块

- ⚙️ **配置文件增强**：支持在配置文件中设置频率计算余量
  - 新增`Margin`参数，用于设置频率计算余量百分比（默认为10%）
  - 示例：`Margin=10`表示频率计算时预留10%的余量

### 改进 🔧

- 🖥️ **WebUI界面优化**：
  - 改进深色/浅色模式切换逻辑，支持跟随系统主题
  - 优化日志查看功能，支持选择不同日志文件
  - 日志等级设置现在可以在WebUI中直接修改并立即生效

- 📱 **前台应用检测**：改进前台应用检测机制，支持Android 10及以上系统
  - 使用Android系统的dumpsys命令监控前台应用
  - 更准确地识别游戏应用，提供更好的游戏体验

- 📊 **日志系统优化**：
  - 改进日志轮转机制，防止日志文件过大
  - 优化日志内容格式，提供更清晰的信息

- 🔄 **启动流程优化**：
  - 改进模块初始化流程，提高启动速度
  - 优化配置文件读取逻辑，提高兼容性

### 修复 🐛

- 🔧 **修复日志等级设置问题**：修复在某些情况下日志等级设置不生效的问题
- 🖥️ **修复WebUI界面显示问题**：修复在某些设备上WebUI界面显示异常的问题
- 📊 **修复负载监控问题**：修复在某些设备上负载监控不准确的问题

### 其他变更 📋

- 👥 **作者信息更新**：新增作者 rtools @CoolApk
- 🙏 **致谢名单更新**：新增"测试反馈: 内测群全体群友"
- 📝 **文档更新**：更新README.md，添加更多详细说明和常见问题解答

### 文件路径 📂

- 模块目录：`/data/adb/modules/Mediatek_Mali_GPU_Governor/`
- 配置文件：`/data/gpu_freq_table.conf`
- 游戏列表：`/data/adb/gpu_governor/games.conf`
- 日志文件：`/data/adb/gpu_governor/log/gpu_gov.log`
- 日志等级设置：`/data/adb/gpu_governor/log_level`
- 游戏模式状态：`/data/adb/gpu_governor/game_mode`
